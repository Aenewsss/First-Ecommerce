<%- include('../layouts/adminheader.ejs') %>

<h1 class="display-4">Products</h1>
<a href="/admin/products/add-product" class="btn btn-primary">Add a new product</a>
<br>

<% if(count > 0){ %> 

<table class="table table-striped">
    <thead>
        <tr class="home">
            <th>Product</th>
            <th>Price</th>
            <th>Category</th>
            <th>Product Image</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        <% products.forEach(product=> { %>
            <tr>
                <td> <%= product.title %> </td>
                <td>R$ <%= parseFloat(product.price).toFixed(2) %> </td>
                <td> <%= product.category %> </td>
                <td>
                    <% if(product.image == "") { %>
                        <img id="noimage" src="/images/noimage.png">
                    <% }else{ %>
                        <img id="noimage" src="/product_images/<%= product._id %>/<%= product.image %>" alt="">
                    <% } %>
                </td>
                <td><a href="/admin/products/edit-product/<%= product._id %>">Edit</a></td>
                <td>
                    <a class="bi bi-trash" id="confirmDeletion" href="/admin/products/delete-product/<%= product._id %>"></a> 
                </td>
            </tr>
        <% }) %>
    </tbody>
</table>

<% }else{ %> 
    <h3 class="text-center">There are no products.</h3>
<% } %> 

<%- include('../layouts/adminfooter.ejs') %>
